<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arpanam | Vedic Rituals</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --saffron: #D45D12; --cream: #FDFBF7; }
        body { font-family: 'Montserrat', sans-serif; background-color: var(--cream); color: #2D241E; margin: 0; }
        h1, h2, h3 { font-family: 'Cinzel', serif; }
        .saffron-btn { background: var(--saffron); color: white; border: none; cursor: pointer; transition: 0.3s; }
        .saffron-btn:hover { background: #b04b0d; transform: translateY(-2px); }
        .ritual-card { transition: 0.3s; border: 1px solid #E5D9C5; background: white; cursor: pointer; }
        .ritual-card:hover { border-color: var(--saffron); transform: translateY(-4px); }
    </style>
</head>
<body>
    <div id="root">
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Cinzel', serif; color: #D45D12;">
            Loading Arpanam Experience...
        </div>
    </div>

    <script type="text/babel">
        const { useState } = React;

        const rituals = [
            { id: 1, name: "Satyanarayan Katha", price: 4500, usd: 54, type: "STANDARD", desc: "For family harmony and universal gratitude.", details: "The traditional narration and puja for Lord Vishnu, bringing peace to the household." },
            { id: 2, name: "Naamkaran", price: 3100, usd: 38, type: "STANDARD", desc: "Bless your child's first milestone.", details: "Authentic Vedic naming ceremony including Nakshatra analysis and blessings." },
            { id: 3, name: "Mahamrityunjaya", price: 8500, usd: 105, type: "EMERGENCY", desc: "A powerful Vedic shield for health.", details: "Intense jaap performed by Vedic priests for recovery and protection against health hurdles." },
            { id: 4, name: "Navagraha Shanti", price: 7500, usd: 90, type: "STANDARD", desc: "Align energies to overcome life hurdles.", details: "Targeted prayers for the nine planets to smooth over career or health complications." },
            { id: 5, name: "Pitru Dosh", price: 21000, usd: 250, type: "PERIOD", desc: "Honoring ancestors at the banks of Ganga.", details: "Rituals performed at sacred ghats to provide peace to the souls of ancestors." },
            { id: 6, name: "Griha Pravesh", price: 15500, usd: 185, type: "STANDARD", desc: "Sanctify your new dwelling with Vastu Shanti.", details: "A complete purification of your home. Includes Ganesh Homa and Vastu Shanti." }
        ];

        // Replace with your URL
        const SCRIPT_URL = "YOUR_APPS_SCRIPT_URL_HERE";

        function App() {
            const [view, setView] = useState('LOBBY');
            const [activeRitual, setActiveRitual] = useState(null);
            const [formData, setFormData] = useState({ name: '', gotra: '', whatsapp: '', country: '', date: '', flexibility: 'No', notes: '' });
            const [status, setStatus] = useState('IDLE');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setStatus('SUBMITTING');
                const params = new URLSearchParams();
                params.append('Name', formData.name);
                params.append('Gotra', formData.gotra || 'NA');
                params.append('Puja', activeRitual.name);
                params.append('WhatsApp', formData.whatsapp);
                params.append('Country', formData.country);
                params.append('Date', formData.date);
                params.append('Flexibility', formData.flexibility);
                params.append('Notes', formData.notes || 'No extra notes');

                try {
                    await fetch(SCRIPT_URL, { method: 'POST', body: params, mode: 'no-cors' });
                    setTimeout(() => {
                        window.location.href = "https://razorpay.me/@arpanam";
                    }, 800);
                } catch (err) {
                    alert("Submission error. Please try again.");
                    setStatus('IDLE');
                }
            };

            return (
                <div className="min-h-screen">
                    <header className="p-8 text-center border-b border-[#E5D9C5]">
                        <h1 className="text-4xl tracking-widest text-[#D45D12] font-bold">ARPANAM</h1>
                        <p className="text-xs uppercase tracking-[0.3em] opacity-60 mt-2">Authentic Vedic Sankalp</p>
                    </header>

                    <main className="max-w-6xl mx-auto p-6 md:py-16">
                        {view === 'LOBBY' && (
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                {rituals.map(r => (
                                    <div key={r.id} className="ritual-card p-8 flex flex-col justify-between" onClick={() => { setActiveRitual(r); setView('DETAIL'); }}>
                                        <div>
                                            <h3 className="text-2xl mb-3">{r.name}</h3>
                                            <p className="opacity-70 text-sm mb-6 leading-relaxed">{r.desc}</p>
                                        </div>
                                        <p className="text-lg font-semibold text-[#D45D12]">₹{r.price.toLocaleString()} <span className="text-sm font-normal opacity-50">/ ~${r.usd}</span></p>
                                    </div>
                                ))}
                            </div>
                        )}

                        {view === 'DETAIL' && activeRitual && (
                            <div className="bg-white p-8 md:p-16 border border-[#E5D9C5] max-w-3xl mx-auto shadow-sm">
                                <button onClick={() => setView('LOBBY')} className="mb-8 opacity-50 hover:opacity-100 text-sm">← BACK</button>
                                <h2 className="text-4xl mb-4">{activeRitual.name}</h2>
                                <p className="text-2xl text-[#D45D12] font-bold mb-8">Dakshina: ₹{activeRitual.price.toLocaleString()} (~${activeRitual.usd})</p>
                                <p className="text-lg mb-10 opacity-90">{activeRitual.details}</p>
                                <button onClick={() => setView('FORM')} className="saffron-btn px-12 py-5 text-xl font-bold w-full md:w-auto">Start Sankalp</button>
                            </div>
                        )}

                        {view === 'FORM' && activeRitual && (
                            <div className="bg-white p-8 md:p-12 border border-[#E5D9C5] max-w-2xl mx-auto shadow-sm">
                                <button onClick={() => setView('DETAIL')} className="mb-8 opacity-50 text-sm">← BACK</button>
                                <h2 className="text-3xl mb-8">Sankalp Registration</h2>
                                <form onSubmit={handleSubmit} className="space-y-6">
                                    <input required placeholder="Full Name" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, name: e.target.value})} />
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <input placeholder="Gotra" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, gotra: e.target.value})} />
                                        <input required placeholder="Country" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, country: e.target.value})} />
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-xs uppercase tracking-widest opacity-60">
                                            {activeRitual.type === 'EMERGENCY' ? 'Timing Urgency' : activeRitual.type === 'PERIOD' ? 'Preferred Period' : 'Preferred Date'}
                                        </label>
                                        {activeRitual.type === 'PERIOD' ? (
                                            <select required className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, date: e.target.value})}>
                                                <option value="">Select Period</option>
                                                <option value="Pitru Paksha">Upcoming Pitru Paksha</option>
                                                <option value="Amavasya Tithi">Amavasya (Monthly)</option>
                                                <option value="Annual Tithi">Annual Tithi (Varshik)</option>
                                            </select>
                                        ) : activeRitual.type === 'EMERGENCY' ? (
                                            <select required className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, date: e.target.value})}>
                                                <option value="ASAP">ASAP - Health Emergency</option>
                                                <option value="Within 48 Hours">Within 48 Hours</option>
                                                <option value="Specific Date">Specific Date</option>
                                            </select>
                                        ) : (
                                            <input required type="date" min={new Date(Date.now() + 172800000).toISOString().split('T')[0]} 
                                                className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" 
                                                onChange={e => setFormData({...formData, date: e.target.value})} />
                                        )}
                                    </div>
                                    <div className="flex items-center space-x-3 p-3 bg-[#FFF9F2]/50">
                                        <input type="checkbox" id="flex" className="w-5 h-5 accent-[#D45D12]" onChange={e => setFormData({...formData, flexibility: e.target.checked ? 'Yes' : 'No'})} />
                                        <label htmlFor="flex" className="text-sm cursor-pointer">Flexible with date for better Muhurat.</label>
                                    </div>
                                    <input required placeholder="WhatsApp Number" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, whatsapp: e.target.value})} />
                                    <textarea placeholder="Special Instructions" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2] h-24" onChange={e => setFormData({...formData, notes: e.target.value})}></textarea>
                                    <button type="submit" disabled={status === 'SUBMITTING'} className="saffron-btn w-full py-5 font-bold text-lg">
                                        {status === 'SUBMITTING' ? 'Connecting...' : `Pay & Book via Razorpay`}
                                    </button>
                                </form>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>