<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arpanam | Vedic Rituals for the Modern World</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --saffron: #D45D12; --cream: #FDFBF7; --gold: #C5A059; }
        body { font-family: 'Montserrat', sans-serif; background-color: var(--cream); color: #2D241E; }
        h1, h2, h3 { font-family: 'Cinzel', serif; }
        .saffron-btn { background: var(--saffron); color: white; transition: all 0.3s ease; }
        .saffron-btn:hover { background: #b04b0d; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(212, 93, 18, 0.3); }
        .ritual-card { transition: all 0.3s ease; border: 1px solid #E5D9C5; }
        .ritual-card:hover { border-color: var(--saffron); transform: translateY(-4px); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // STRATEGIC DATA: Rituals with Pricing and Intelligence
        const rituals = [
            { id: 1, name: "Satyanarayan Katha", price: 4500, usd: 54, type: "STANDARD", desc: "For family harmony and universal gratitude.", details: "The traditional narration and puja for Lord Vishnu, bringing peace to the household." },
            { id: 2, name: "Naamkaran", price: 3100, usd: 38, type: "STANDARD", desc: "Bless your child's first milestone.", details: "Authentic Vedic naming ceremony including Nakshatra analysis and blessings." },
            { id: 3, name: "Mahamrityunjaya", price: 8500, usd: 105, type: "EMERGENCY", desc: "A powerful Vedic shield for health.", details: "Intense jaap performed by Vedic priests for recovery and protection against health hurdles." },
            { id: 4, name: "Navagraha Shanti", price: 7500, usd: 90, type: "STANDARD", desc: "Align energies to overcome life hurdles.", details: "Targeted prayers for the nine planets to smooth over career or health complications." },
            { id: 5, name: "Pitru Dosh", price: 21000, usd: 250, type: "PERIOD", desc: "Honoring ancestors at the banks of Ganga.", details: "Rituals performed at sacred ghats to provide peace to the souls of ancestors." },
            { id: 6, name: "Griha Pravesh", price: 15500, usd: 185, type: "STANDARD", desc: "Sanctify your new dwelling with Vastu Shanti.", details: "A complete purification of your home. Includes Ganesh Homa and Vastu Shanti." }
        ];

        // Replace with your current Apps Script Web App URL
        const SCRIPT_URL = "YOUR_APPS_SCRIPT_URL_HERE";

        function App() {
            const [view, setView] = useState('LOBBY');
            const [activeRitual, setActiveRitual] = useState(null);
            const [formData, setFormData] = useState({ name: '', gotra: '', whatsapp: '', country: '', date: '', flexibility: 'No', notes: '' });
            const [status, setStatus] = useState('IDLE');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setStatus('SUBMITTING');

                const params = new URLSearchParams();
                params.append('Name', formData.name);
                params.append('Gotra', formData.gotra);
                params.append('Puja', activeRitual.name);
                params.append('WhatsApp', formData.whatsapp);
                params.append('Country', formData.country);
                params.append('Date', formData.date);
                params.append('Flexibility', formData.flexibility);
                params.append('Notes', formData.notes);

                try {
                    const response = await fetch(SCRIPT_URL, { method: 'POST', body: params, mode: 'no-cors' });
                    // Since no-cors, we can't read the response, so we wait and assume success/redirect
                    setTimeout(() => {
                        window.location.href = "https://razorpay.me/@arpanam"; // Replace with your actual payment page if different
                    }, 1500);
                } catch (err) {
                    alert("Submission error. Please contact us on WhatsApp.");
                    setStatus('IDLE');
                }
            };

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="p-8 text-center border-b border-[#E5D9C5]">
                        <h1 className="text-4xl tracking-widest text-[#D45D12] font-bold">ARPANAM</h1>
                        <p className="text-xs uppercase tracking-[0.3em] opacity-60 mt-2">Authentic Vedic Sankalp</p>
                    </header>

                    <main className="max-w-6xl mx-auto p-6 md:py-16">
                        {view === 'LOBBY' && (
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                {rituals.map(r => (
                                    <div key={r.id} className="ritual-card bg-white p-8 flex flex-col justify-between">
                                        <div>
                                            <h3 className="text-2xl mb-3">{r.name}</h3>
                                            <p className="opacity-70 text-sm mb-6 leading-relaxed">{r.desc}</p>
                                        </div>
                                        <div className="mt-4">
                                            <p className="text-lg font-semibold text-[#D45D12] mb-4">₹{r.price.toLocaleString()} <span className="text-sm font-normal opacity-50">/ ~${r.usd}</span></p>
                                            <button onClick={() => { setActiveRitual(r); setView('DETAIL'); }} className="w-full py-3 border border-[#D45D12] text-[#D45D12] hover:bg-[#D45D12] hover:text-white transition-all">VIEW DETAILS</button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {view === 'DETAIL' && (
                            <div className="bg-white p-8 md:p-16 border border-[#E5D9C5] max-w-3xl mx-auto shadow-sm">
                                <button onClick={() => setView('LOBBY')} className="mb-8 opacity-50 hover:opacity-100 text-sm">← BACK TO ALL RITUALS</button>
                                <h2 className="text-4xl mb-4 font-bold">{activeRitual.name}</h2>
                                <p className="text-2xl text-[#D45D12] font-bold mb-8">Dakshina: ₹{activeRitual.price.toLocaleString()} <span className="text-base font-normal opacity-50 italic"> (~${activeRitual.usd} USD)</span></p>
                                <div className="space-y-6 text-lg leading-relaxed opacity-90 mb-10 border-t border-b border-[#F0E6D6] py-8">
                                    <p>{activeRitual.details}</p>
                                    <ul className="text-sm space-y-2 opacity-75">
                                        <li>• All-inclusive Vedic Samagri provided</li>
                                        <li>• Coordination by Acharya via WhatsApp</li>
                                        <li>• Digital Sankalp/Video evidence included</li>
                                    </ul>
                                </div>
                                <button onClick={() => setView('FORM')} className="saffron-btn px-12 py-5 text-xl font-bold w-full md:w-auto">Start Sankalp Process</button>
                            </div>
                        )}

                        {view === 'FORM' && (
                            <div className="bg-white p-8 md:p-16 border border-[#E5D9C5] max-w-2xl mx-auto">
                                <button onClick={() => setView('DETAIL')} className="mb-8 opacity-50 text-sm">← BACK</button>
                                <h2 className="text-3xl mb-4 font-bold">Registration & Intent</h2>
                                
                                <div className="bg-[#FFF9F2] p-4 border-l-4 border-[#D45D12] mb-8 text-sm italic">
                                    Note: Exact <b>Muhurat timing</b> will be confirmed by our Acharya over WhatsApp after consulting the Panchang.
                                </div>

                                <form onSubmit={handleSubmit} className="space-y-6">
                                    <input required placeholder="Full Name" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, name: e.target.value})} />
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <input placeholder="Gotra (Lineage)" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, gotra: e.target.value})} />
                                        <input required placeholder="Country (e.g. USA)" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, country: e.target.value})} />
                                    </div>

                                    {/* Smart Date Selection */}
                                    <div className="space-y-3">
                                        <label className="text-xs uppercase tracking-widest opacity-60">
                                            {activeRitual.type === 'EMERGENCY' ? 'Timing Urgency' : 
                                             activeRitual.type === 'PERIOD' ? 'Preferred Period' : 'Preferred Date'}
                                        </label>

                                        {activeRitual.type === 'PERIOD' ? (
                                            <select required className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, date: e.target.value})}>
                                                <option value="">Select Period</option>
                                                <option value="Pitru Paksha">Upcoming Pitru Paksha</option>
                                                <option value="Amavasya Tithi">Amavasya (Monthly)</option>
                                                <option value="Annual Tithi">Annual Tithi (Varshik)</option>
                                            </select>
                                        ) : activeRitual.type === 'EMERGENCY' ? (
                                            <select required className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, date: e.target.value})}>
                                                <option value="ASAP">ASAP - Health Emergency</option>
                                                <option value="Within 48 Hours">Within 48 Hours</option>
                                                <option value="Specific Date">I have a specific date in mind</option>
                                            </select>
                                        ) : (
                                            <input required type="date" min={new Date(Date.now() + 172800000).toISOString().split('T')[0]} 
                                                className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" 
                                                onChange={e => setFormData({...formData, date: e.target.value})} />
                                        )}
                                    </div>

                                    {/* Flexibility Toggle */}
                                    <div className="flex items-center space-x-3 p-2 bg-[#FFF9F2]/50">
                                        <input type="checkbox" id="flex" className="w-5 h-5 accent-[#D45D12]" 
                                            onChange={e => setFormData({...formData, flexibility: e.target.checked ? 'Yes' : 'No'})} />
                                        <label htmlFor="flex" className="text-sm opacity-80 cursor-pointer">I am flexible if a better Muhurat is available nearby.</label>
                                    </div>

                                    <input required placeholder="WhatsApp Number (+1...)" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2]" onChange={e => setFormData({...formData, whatsapp: e.target.value})} />
                                    
                                    <textarea placeholder="Special Instructions or Health Details" className="w-full p-4 border border-[#E5D9C5] bg-[#FFF9F2] h-24" onChange={e => setFormData({...formData, notes: e.target.value})}></textarea>

                                    <button type="submit" disabled={status === 'SUBMITTING'} className="saffron-btn w-full py-5 font-bold text-lg">
                                        {status === 'SUBMITTING' ? 'Connecting to Secure Payment...' : `Pay ₹${activeRitual.price.toLocaleString()} & Book via Razorpay`}
                                    </button>
                                    <p className="text-[10px] text-center opacity-40 uppercase tracking-widest">Secure Payment powered by Razorpay</p>
                                </form>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>